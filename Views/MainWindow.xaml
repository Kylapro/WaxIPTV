<Window x:Class="WaxIPTV.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:WaxIPTV.Views"
        Title="WaxIPTV"
        Height="600"
        Width="980"
        MinHeight="400"
        MinWidth="600"
        Background="{DynamicResource BgBrush}"
        Foreground="{DynamicResource TextBrush}"
        Icon="pack://application:,,,/WaxIPTVIcon.ico">
    <!--
        The main application window displays a list of IPTV channels
        alongside a Now/Next panel and playback controls.  A top
        level menu provides access to the settings dialog and an
        exit command.  Channels can be doubleâ€‘clicked to start
        playback immediately; the play/pause/stop buttons control
        the currently active external player.
    -->
    <DockPanel>
        <!-- Top menu bar -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Header="Settings..." Click="SettingsMenu_Click" InputGestureText="Ctrl+,"/>
                <MenuItem Header="EPG Guide" Click="GuideMenu_Click"/>
                <MenuItem Header="Refresh (Playlist + EPG)" Click="RefreshMenu_Click"/>
                <Separator/>
                <MenuItem Header="Exit" Click="ExitMenu_Click"/>
            </MenuItem>
        </Menu>

        <!-- Main content: two columns -->
        <Grid Margin="8">
            <Grid.ColumnDefinitions>
                <!-- Fixed width for the channel list -->
                <ColumnDefinition Width="280"/>
                <!-- Remaining space for the now/next panel -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left: filter bar and channel list -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <!-- Filter bar: provides a group selector and search box.  The
                     search box occupies remaining space thanks to DockPanel.
                     Controls use SurfaceBrush and DividerBrush to improve
                     contrast against the dark background. -->
                <DockPanel Margin="0,0,0,8" Grid.Row="0">
                    <!-- Group filter on the left -->
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" Margin="0,0,8,0">
                        <TextBlock Text="Group" VerticalAlignment="Center" Margin="0,0,6,0"/>
                        <ComboBox x:Name="GroupFilter" Width="160"
                                  SelectionChanged="GroupFilter_SelectionChanged"
                                  Background="{DynamicResource DropdownBrush}"
                                  Foreground="{DynamicResource TextBrush}"
                                  BorderBrush="{DynamicResource DividerBrush}"
                                  BorderThickness="1"/>
                    </StackPanel>
                    <!-- Clear button on the right -->
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" Margin="8,0,0,0">
                        <Button Content="Clear"
                                Click="ClearSearch_Click"
                                Style="{DynamicResource AccentButton}"/>
                    </StackPanel>
                    <!-- Search box fills the remaining space -->
                    <TextBox x:Name="SearchBox"
                             Margin="0,0,8,0"
                             VerticalAlignment="Center"
                             HorizontalAlignment="Stretch"
                             TextChanged="SearchBox_TextChanged"
                             Background="{DynamicResource SurfaceBrush}"
                             Foreground="{DynamicResource TextBrush}"
                             BorderBrush="{DynamicResource DividerBrush}"
                             BorderThickness="1"/>
                </DockPanel>
                <!-- Channel list -->
                <views:ChannelListView x:Name="ChannelList" Grid.Row="1"
                                       ChannelActivated="ChannelList_ChannelActivated"/>
            </Grid>

            <!-- Right: selected channel title, now/next and controls.  The
                 entire panel is placed inside a card using the SurfaceBrush
                 and ThemeCornerRadius tokens.  Padding and spacing are
                 defined via design tokens to ensure consistent layout. -->
            <Border Grid.Column="1"
                    Margin="12,0,0,0"
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="{DynamicResource ThemeCornerRadius}"
                    Padding="{DynamicResource SpacingM}">
                <StackPanel>
                    <!-- Selected channel name -->
                    <TextBlock x:Name="SelectedChannelTitle" FontSize="18" FontWeight="Bold" Margin="0,0,0,8"/>
                    <!-- Now/next view -->
                    <views:EpgNowNext x:Name="NowNext"/>
                    <!-- Playback controls -->
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                        <Button x:Name="PlayButton" Content="Play" Width="80" Margin="0,0,8,0" Click="PlayButton_Click" Style="{DynamicResource AccentButton}"/>
                        <Button x:Name="PauseButton" Content="Pause" Width="80" Margin="0,0,8,0" Click="PauseButton_Click" Style="{DynamicResource AccentButton}"/>
                        <Button x:Name="StopButton" Content="Stop" Width="80" Click="StopButton_Click" Style="{DynamicResource AccentButton}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>
